<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据链路层 | 老杆的前端记录</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="Go big or go home">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.585d659a.js" as="script"><link rel="preload" href="/assets/js/2.5bf1c715.js" as="script"><link rel="preload" href="/assets/js/27.867f73b1.js" as="script"><link rel="prefetch" href="/assets/js/10.3c4722f1.js"><link rel="prefetch" href="/assets/js/11.926d9a65.js"><link rel="prefetch" href="/assets/js/12.89662875.js"><link rel="prefetch" href="/assets/js/13.b24d0fd4.js"><link rel="prefetch" href="/assets/js/14.fe4261ec.js"><link rel="prefetch" href="/assets/js/15.d5d2b490.js"><link rel="prefetch" href="/assets/js/16.d7cb7df3.js"><link rel="prefetch" href="/assets/js/17.a8a539e4.js"><link rel="prefetch" href="/assets/js/18.9a7a379f.js"><link rel="prefetch" href="/assets/js/19.902e5d6c.js"><link rel="prefetch" href="/assets/js/20.89b4b03e.js"><link rel="prefetch" href="/assets/js/21.b9428d88.js"><link rel="prefetch" href="/assets/js/22.bca3e9c2.js"><link rel="prefetch" href="/assets/js/23.dd12f692.js"><link rel="prefetch" href="/assets/js/24.a1974514.js"><link rel="prefetch" href="/assets/js/25.e878ae6c.js"><link rel="prefetch" href="/assets/js/26.efd1416d.js"><link rel="prefetch" href="/assets/js/28.fbfc66d6.js"><link rel="prefetch" href="/assets/js/29.279cac21.js"><link rel="prefetch" href="/assets/js/3.2cde5f11.js"><link rel="prefetch" href="/assets/js/30.4a27f7bc.js"><link rel="prefetch" href="/assets/js/31.11173338.js"><link rel="prefetch" href="/assets/js/32.c2786358.js"><link rel="prefetch" href="/assets/js/33.8f760173.js"><link rel="prefetch" href="/assets/js/34.f437c018.js"><link rel="prefetch" href="/assets/js/35.ca6d5641.js"><link rel="prefetch" href="/assets/js/36.e670371f.js"><link rel="prefetch" href="/assets/js/37.c5143da6.js"><link rel="prefetch" href="/assets/js/38.83226dcf.js"><link rel="prefetch" href="/assets/js/39.29c51311.js"><link rel="prefetch" href="/assets/js/4.90c5fe7f.js"><link rel="prefetch" href="/assets/js/40.9f439bf9.js"><link rel="prefetch" href="/assets/js/41.817698ff.js"><link rel="prefetch" href="/assets/js/42.7086e250.js"><link rel="prefetch" href="/assets/js/5.93058ddb.js"><link rel="prefetch" href="/assets/js/6.0e5f5053.js"><link rel="prefetch" href="/assets/js/7.e30bb482.js"><link rel="prefetch" href="/assets/js/8.5e1ee355.js"><link rel="prefetch" href="/assets/js/9.574fd584.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">老杆的前端记录</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  求职笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontEnd/html/html-audition.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/css/css-audition.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/js/js-audition.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/vue/vue-audition.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/webpack/webpack-audition.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/browser/browser-audition.html" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><a href="/computerBase/" class="nav-link router-link-active">
  计算机基础
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  求职笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontEnd/html/html-audition.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/css/css-audition.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/js/js-audition.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/vue/vue-audition.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/webpack/webpack-audition.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/browser/browser-audition.html" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><a href="/computerBase/" class="nav-link router-link-active">
  计算机基础
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>常见算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/computerBase/algorithm/sort.html" class="sidebar-link">十大排序算法</a></li><li><a href="/computerBase/algorithm/data-structure.html" class="sidebar-link">数据结构</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>力扣刷题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/computerBase/leetcode/bTree.html" class="sidebar-link">二叉树</a></li><li><a href="/computerBase/leetcode/house-robber.html" class="sidebar-link">打家劫舍</a></li><li><a href="/computerBase/leetcode/path-sum.html" class="sidebar-link">路径总和</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/computerBase/net/brief.html" class="sidebar-link">概述</a></li><li><a href="/computerBase/net/data-link-layer.html" aria-current="page" class="active sidebar-link">数据链路层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/computerBase/net/data-link-layer.html#基本概念" class="sidebar-link">基本概念</a></li><li class="sidebar-sub-header"><a href="/computerBase/net/data-link-layer.html#点对点信道" class="sidebar-link">点对点信道</a></li><li class="sidebar-sub-header"><a href="/computerBase/net/data-link-layer.html#ppp点对点协议" class="sidebar-link">PPP点对点协议</a></li><li class="sidebar-sub-header"><a href="/computerBase/net/data-link-layer.html#使用广播信道" class="sidebar-link">使用广播信道</a></li><li class="sidebar-sub-header"><a href="/computerBase/net/data-link-layer.html#mac" class="sidebar-link">MAC</a></li></ul></li><li><a href="/computerBase/net/network-layer.html" class="sidebar-link">网络层</a></li><li><a href="/computerBase/net/TCP.html" class="sidebar-link">TCP概述</a></li><li><a href="/computerBase/net/DNS.html" class="sidebar-link">域名系统DNS</a></li><li><a href="/computerBase/net/Http.html" class="sidebar-link">HTTP</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="数据链路层"><a href="#数据链路层" class="header-anchor">#</a> 数据链路层</h1> <h2 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h2> <p>数据链路层使用的信道主要有两种类型：<strong>点对点信道</strong>、<strong>广播信道</strong></p> <p>链路：从一个结点到相邻结点的一段物理线路，中间没有任何其他交换结点。是一条路径的一部分。</p> <p>数据链路：除了必须有一条物理线路以外，还必须有一些必要的通信协议来控制这些数据的传输</p> <p>数据链路层的三个基本问题：<strong>封装成帧</strong>，<strong>透明传输</strong>、<strong>差错检测</strong></p> <details class="custom-block details"><summary>DETAILS</summary> <p>封装成帧：首部尾部打上帧定界符。一个帧的帧长等于帧的数据部分加上帧首部和帧尾部的长度。</p> <p>透明传输：数据中出现和界定符相同的字符要进行处理。所谓透明，就是无论什么样的比特组合，都能原样没有差错的通过这个数据链路层，那么就像这个数据链路层“”不存在“一样。发送端的数据链路层在数据中出现控制字符时要插入一些转义字符</p> <p>差错检测：用CRC方法检测。为了检错要添加冗余码。保证无比特差错</p></details> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>无比特差错和无传输差错是两个不同概念，差错检测能够实现无比特差错的传输</p></div> <h2 id="点对点信道"><a href="#点对点信道" class="header-anchor">#</a> 点对点信道</h2> <p>点对点信道的数据链路层的协议数据单元：帧</p> <p>通信的主要步骤：1、结合网络层交下来的IP数据报添加首部和尾部封装成帧；2、封装好的帧进行传输；3、接收方收到的帧无差错则提取IP数据报交给上层，出差错则丢弃</p> <h2 id="ppp点对点协议"><a href="#ppp点对点协议" class="header-anchor">#</a> PPP点对点协议</h2> <p>点对点协议主要应用在用户计算机与ISP进行通信时用的数据链路层协议。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>PPP协议只支持全双工链路</p></div> <p>协议由三部分组成：1、将IP数据报封装到链路中的方法；2、建立LCP链路；3、网络控制协议NCP</p> <p>PPP协议的帧格式：首尾一个字节的界定符，首部第四个字段2个字节是协议字段，中间信息部分不超过1500个字节</p> <p>PPP协议的过程：</p> <ol><li>（链路静止）此时用户和ISP的路由器之间并没有物理层连接。用户请求接入ISP</li> <li>（链路建立）协商LCP配置选项，建立链路层的LCP连接。选项包括链路层的最大帧长等。</li> <li>（鉴别）鉴别用户身份</li> <li>（网络层协议）NCP根据网络层的不同协议互相交换网络层特定的网络控制分组。配置网络层协议，给用户分配一个临时的IP地址</li> <li>（链路打开）两个端可以彼此向对方发送分组</li></ol> <h2 id="使用广播信道"><a href="#使用广播信道" class="header-anchor">#</a> 使用广播信道</h2> <p>局域网比广域网具有更高的数据率、较低的时延、较小的误码率。</p> <p>局域网常用的网络拓扑结构：星形网、环形网、总线网</p> <p>以太网是用<strong>随机接入</strong>的，随机接入是一种共享信道的方法，特点是所有用户都可随机的发送信息，但如果两个用户在同一时刻发信息，就会产生<strong>碰撞</strong>，所以必须要有解决<strong>碰撞</strong>的网络协议</p> <p>适配器的作用：<strong>计算机与外界局域网的连接时通过适配器</strong>（简称<strong>网卡</strong>）进行的。适配器与局域网的通信是靠电缆或双绞线，与计算机之间的通信是靠I/O总线；把接收有差错的帧丢弃，把正确的帧使用中断告知计算机并交付网络层，把计算机要发送的IP数据报组装成帧发送到局域网。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>计算机的硬件地址在适配器的ROM中，但计算机的IP地址在计算机的存储器中</p></div> <p>总线的特点：当一台计算机发送数据时，总线上所有计算机都能检测到这个数据</p> <p>为了通信的简便，以太网采取以下两种措施：</p> <p>1、采用灵活的无连接工作方式。以太网提供的服务时尽最大努力交付、即不可靠的传输。对差错帧是否重传完全由高层决定。</p> <p>2、发送的数据都用曼彻斯特编码的信号。</p> <h3 id="csma-cd协议"><a href="#csma-cd协议" class="header-anchor">#</a> CSMA/CD协议</h3> <p>总线上只要一台计算机发送数据，总线的资源就被占用，在用一时间只能允许一台计算机发送数据。</p> <p>载波监听多点接入/碰撞检测</p> <ul><li>多点接入：许多计算机以多点接入的方式连接在一条总线上。</li> <li>载波监听：不管在发送前，还是在发送中，每个站都必须不停的检测信道。</li> <li>碰撞检测：边发送边监听，发送过程中检测有没有其他站也在发送数据。任何一个正在发送数据的站，一旦总线检测出了碰撞，就要立即停止发送数据，等待一段随机时间后再次发送</li></ul> <p>电磁波在1km电缆的传播时延约为5us。总线上单程端到端的传播时延记为τ。发送碰撞的那个时刻，发端和收端都还不知道发生了碰撞，必须等至少τ数据到达某一方时才被检测到。</p> <p>发送数据帧后<strong>至多</strong>经过时间2τ就可以知道所发送搞得帧是否发生了碰撞。</p> <p><strong>争用期</strong>：两倍单程端到端传播时延2τ。</p> <p>在<strong>争用期</strong>内一直未检测到碰撞，这个帧肯定能够发送成功。</p> <p>对于10Mbit/s的以太网，在争用期内可发送512bit。即争用期是512比特时间</p> <p>在<strong>争用期</strong>内检测到碰撞，立即停止发送数据，按规定发送人为干扰信号，适配器接着做<strong>退避算法</strong>（等待一个随机时间重传），若重传16次都不能成功，则停止重传。</p> <p>最短帧长64字节，即512bit。检测到了冲突就停止发送，这时发送出去的帧一定小于64字节，因此长度小于64字节的帧都是由于冲突引起的无效帧。</p> <p><strong>强化碰撞</strong>：发送数据的站一旦发现发生了碰撞，除了立即停止发送数据，还要继续发送32/48bit的人为干扰信号。</p> <p>信道必须在<strong>96比特时间</strong>内保持空闲，适配器才发送这个帧。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>使用CSMA/CD协议的以太网不可能进行全双工通信，而只能进行双向交替通信（半双工）</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>集线器工作在<strong>物理层</strong>，集线器上的星型拓扑结构本质上还是总线结构，还是半双工通信，故还需使用CSMA/CD协议</p> <p>以太网交换器的出现，工作在全双工方式上，多对主机能同时通信，相互通信的主机独占传输媒体，无碰撞的传输数据，因此不适用CSMA/CD协议了</p></div> <h2 id="mac"><a href="#mac" class="header-anchor">#</a> MAC</h2> <p>MAC地址是固化在适配器ROM中的地址，即适配器标识符</p> <p>局域网适配器使用的是<strong>6字节</strong>的MAC地址，前三个字节使机构标识符，后三个字节由厂家自行指派。</p> <p>以太网V2的MAC帧格式（最短帧长64个字节，64-18就是数据字段的最小长度）：</p> <ul><li>6字节目的地址</li> <li>6字节源地址</li> <li>2字节类型字段，标志上一层使用的是什么协议，就把MAC交给上一层的这个协议</li> <li>46~1500字节数据长度</li> <li>4字节FCS，用来做CRC检验</li></ul> <p>实际传输时，要比MAC帧多出8个字节。为了接收端迅速实现位同步，要前插8个字节，其中包含帧开始定界符。</p> <p>以太网传送帧时，各帧之间有一定的间隙。以太网不需要帧结束定界符，也不需要字节插入来保证透明传输。</p> <p>IEEE802.3标准规定以下情况为无效的MAC帧:</p> <ul><li><p>帧的长度不是整数个字节</p></li> <li><p>用收到的帧检测序列FCS检测出有差错</p></li> <li><p>收到的帧的数据长度不在46~1500字节之间</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/computerBase/net/brief.html" class="prev">
        概述
      </a></span> <span class="next"><a href="/computerBase/net/network-layer.html">
        网络层
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.585d659a.js" defer></script><script src="/assets/js/2.5bf1c715.js" defer></script><script src="/assets/js/27.867f73b1.js" defer></script>
  </body>
</html>

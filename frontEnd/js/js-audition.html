<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS面试相关 | 老杆的前端记录</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="Go big or go home">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.585d659a.js" as="script"><link rel="preload" href="/assets/js/2.5bf1c715.js" as="script"><link rel="preload" href="/assets/js/36.e670371f.js" as="script"><link rel="prefetch" href="/assets/js/10.3c4722f1.js"><link rel="prefetch" href="/assets/js/11.926d9a65.js"><link rel="prefetch" href="/assets/js/12.89662875.js"><link rel="prefetch" href="/assets/js/13.b24d0fd4.js"><link rel="prefetch" href="/assets/js/14.fe4261ec.js"><link rel="prefetch" href="/assets/js/15.d5d2b490.js"><link rel="prefetch" href="/assets/js/16.d7cb7df3.js"><link rel="prefetch" href="/assets/js/17.a8a539e4.js"><link rel="prefetch" href="/assets/js/18.9a7a379f.js"><link rel="prefetch" href="/assets/js/19.902e5d6c.js"><link rel="prefetch" href="/assets/js/20.89b4b03e.js"><link rel="prefetch" href="/assets/js/21.b9428d88.js"><link rel="prefetch" href="/assets/js/22.bca3e9c2.js"><link rel="prefetch" href="/assets/js/23.dd12f692.js"><link rel="prefetch" href="/assets/js/24.a1974514.js"><link rel="prefetch" href="/assets/js/25.e878ae6c.js"><link rel="prefetch" href="/assets/js/26.efd1416d.js"><link rel="prefetch" href="/assets/js/27.867f73b1.js"><link rel="prefetch" href="/assets/js/28.fbfc66d6.js"><link rel="prefetch" href="/assets/js/29.279cac21.js"><link rel="prefetch" href="/assets/js/3.2cde5f11.js"><link rel="prefetch" href="/assets/js/30.4a27f7bc.js"><link rel="prefetch" href="/assets/js/31.11173338.js"><link rel="prefetch" href="/assets/js/32.c2786358.js"><link rel="prefetch" href="/assets/js/33.8f760173.js"><link rel="prefetch" href="/assets/js/34.f437c018.js"><link rel="prefetch" href="/assets/js/35.ca6d5641.js"><link rel="prefetch" href="/assets/js/37.c5143da6.js"><link rel="prefetch" href="/assets/js/38.83226dcf.js"><link rel="prefetch" href="/assets/js/39.29c51311.js"><link rel="prefetch" href="/assets/js/4.90c5fe7f.js"><link rel="prefetch" href="/assets/js/40.9f439bf9.js"><link rel="prefetch" href="/assets/js/41.817698ff.js"><link rel="prefetch" href="/assets/js/42.7086e250.js"><link rel="prefetch" href="/assets/js/5.93058ddb.js"><link rel="prefetch" href="/assets/js/6.0e5f5053.js"><link rel="prefetch" href="/assets/js/7.e30bb482.js"><link rel="prefetch" href="/assets/js/8.5e1ee355.js"><link rel="prefetch" href="/assets/js/9.574fd584.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">老杆的前端记录</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  求职笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontEnd/html/html-audition.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/css/css-audition.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/js/js-audition.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/vue/vue-audition.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/webpack/webpack-audition.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/browser/browser-audition.html" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><a href="/computerBase/" class="nav-link">
  计算机基础
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  求职笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontEnd/html/html-audition.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/css/css-audition.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/js/js-audition.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/vue/vue-audition.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/webpack/webpack-audition.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontEnd/browser/browser-audition.html" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><a href="/computerBase/" class="nav-link">
  计算机基础
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/frontEnd/js/hand.html" class="sidebar-link">JS常见手写题</a></li><li><a href="/frontEnd/js/usual-api.html" class="sidebar-link">常用API</a></li><li><a href="/frontEnd/js/DOM.html" class="sidebar-link">常用DOM操作</a></li><li><a href="/frontEnd/js/js-audition.html" aria-current="page" class="active sidebar-link">JS面试相关</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js面试相关"><a href="#js面试相关" class="header-anchor">#</a> JS面试相关</h1> <ul><li><p>面向对象的三大特性：多态、封装、继承</p> <ul><li>封装：一个对象封装了自己的属性和方法，不需要依赖其他对象就能完成自己的操作</li> <li>继承：子对象可以继承父对象的属性和行为</li> <li>多态：同一操作于不同类的实例，将产生不一样的结果。不同类的对象收到相同信息将得到不同结果。必要条件是继承了父类，派生出很多子类；或者是依赖于函数的重写</li></ul></li> <li><p>var定义的变量不可配置，删除不报错，也不能删</p></li> <li><p>this指向：</p> <ul><li>默认绑定：非严格模式下，this指向全局对象；严格模式下，this绑定到undefined</li> <li>隐式绑定：绑定到调用函数的对象</li> <li>显示绑定：call、apply、bind，将null、undefined作为第一个参数传入，会被忽略，应用默认绑定</li> <li>new绑定</li> <li>箭头函数【特殊】：箭头函数的this是它外面第一个不是箭头函数的函数的this。无法改变this指向，<strong>在声明的时候就已经确定了</strong></li> <li>多次bind只认第一次bind的指定</li></ul></li> <li><p>元素吸顶效果的方案比较和罗列</p> <p>1、css sticky</p> <p>2、原生offsetTop，这个属性是相对于定位父级的，所以需要循环计算出到浏览器顶部的值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">while</span><span class="token punctuation">(</span> obj<span class="token operator">!==</span> window<span class="token punctuation">.</span>document<span class="token punctuation">.</span>body <span class="token operator">&amp;&amp;</span> obj <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        offsetL <span class="token operator">+=</span> obj<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
        offsetT <span class="token operator">+=</span> obj<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
        obj <span class="token operator">=</span> obj<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> scrollTop <span class="token operator">=</span> window<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token keyword">let</span> offsetTop <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>pride_tab_fixed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不会随滚动变化而变化</span>
    titleFixed <span class="token operator">=</span> scrollTop <span class="token operator">&gt;</span> offsetTop<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>3、元素的getBoundingClientTop方法，返回一个Rect，判断top&lt;0</p> <p>4、Intersection Observer + getBoundingClientTop</p></li> <li><p>图片懒加载：实现方法主要是判断元素出现在可视区域中</p> <p>可用方案：1、offsetTop、scrollTop 2、getBoundingClientRect  3、IntersectionObserver</p> <p>①img标签中要用src属性先指定一个默认加载的图片，data-src指定实际加载的图片src ②监听图片的区域是否进入视图 ③监听滚动事件，并加上节流，将src属性替换成data-src中的属性，并将要加载的imgList删除</p> <p><code>IntersectionObserver</code> 是浏览器原生提供的构造函数，接受两个参数：callback 是可见性变化时的回调函数，option 是配置对象（该参数可选）。</p> <p>目标元素的可见性变化时，就会调用观察器的回调函数 callback。callback 一般会触发两次。一次是目标元素刚刚进入视口（开始可见），另一次是完全离开视口（开始不可见）。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">let</span> imgList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> length <span class="token operator">=</span> imgList<span class="token punctuation">.</span>length
  <span class="token keyword">const</span> imgLazyLoad <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
  
     <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> deleteIndexList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          imgList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">let</span> rect <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  img<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src
                  deleteIndexList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
                  count<span class="token operator">++</span>
                  <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                      document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> imgLazyLoad<span class="token punctuation">)</span>
                  <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
         <span class="token comment">// 加载过的去除</span>
          imgList <span class="token operator">=</span> imgList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>deleteIndexList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token comment">// 这里最好加上处理</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> imgLazyLoad<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img[data-src]'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  rootMargin<span class="token operator">:</span> <span class="token string">'0px'</span><span class="token punctuation">,</span>
  threshold<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entries<span class="token punctuation">,</span> self</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  entries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entry</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> img <span class="token operator">=</span> entry<span class="token punctuation">.</span>target
      <span class="token keyword">let</span> src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src
      <span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span> src
        img<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 解除观察</span>
      self<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>

imgs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>​</p> <ul><li><p><strong>闭包</strong>（优缺点、作用）：引用了另一个函数作用域的函数，用全局上下文的变量对象，和局部函数作用域的活动对象去理解，需要把返回出来的函数设置为等于null才会解除对作用域的引用，让垃圾回收程序可以释放内存</p> <p>优点：可以访问一个函数的私有变量；避免了全局变量的污染</p> <p>缺点：常驻内存，增加了内存使用量；内存泄漏</p></li> <li><p>v8垃圾回收(优化标记清除策略)<a href="https://juejin.cn/post/6981588276356317214#heading-10" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6981588276356317214#heading-10<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>标记整理法，把清除之后，将活动对象的内存往堆的一边移动，形成一片连续的内存空间，而空的内存也是一片连续空间，这就不会出现碎片，优化了之前标记清除中造成内存碎片的问题。</li> <li>分代式垃圾回收，
<ul><li>新生代区区域较小，<strong>垃圾回收比较频繁</strong>，该区域划又被划分为两个区，一个激活状态的From区、一个未激活状态区To区，程序中声明的对象先放在From区，在垃圾回收程序运行后，活动对象会被放入To区，非活动对象会被回收，接着From区和To区互换。当一个对象在这个复制过程中，多次被复制，就会被<strong>晋升</strong>到老生代区（经过一次复制过程或者内存够大）。</li> <li>老生代区存放体积较大的对象，从一组根元素开始遍历，能遍历到的对象为活动对象，没有到达的是非活动对象</li></ul></li> <li>并行回收：进行垃圾回收程序时会阻塞JS脚本的执行，开启多个辅助线程，执行同样的GC工作</li> <li>增量标记：将一次GC过程分为很多小步，执行完一小步就再去执行主JS脚本。由于执行JS代码存在对象引用关系变化的可能，所以V8对此的解决方法是三色标记法，自身没被遍历到为白色，将遍历到自身先变成灰色，然后自身引用的对象遍历到了才变为黑色，下一个GC的一小步开始的时候就从灰色开始继续遍历就行；黑色的引用对象变成新的，那么将这个白色强制变为黑色。</li></ul></li> <li><p>内存泄漏：不是所有无用对象都可以被回收，当那些没用对象无法被及时回收时，就叫内存泄漏</p> <ul><li>不正当的闭包，返回的函数引用的另一个作用域的变量，要记得对返回函数的引用关系取消。</li> <li>隐式的全局变量</li> <li>游离的DOM引用：获取DOM赋予变量，remove结点并不能被GC；获取父节点和子节点的引用，删除父节点的引用，但是子节点还引用着，父节点也不能被GC</li> <li>遗忘的定时器</li></ul></li> <li><p>低代码（lowCode）：一类平台</p></li> <li><p>函数尾调用：某个函数的最后一步时调用另一个函数，ES6规范新增了一项内存管理优化机制，让js引擎在满足条件时可以重用栈帧，可以提前弹出外部函数的栈帧，直接用内层函数的调用帧取代外层函数的调用帧，因为return了一个函数的调用，无需再使用到当前函数内部的信息，所以调用帧能直接取代</p> <p>条件：</p> <ul><li>代码在严格模式下执行，严格模式下禁用了arguments和caller这两个函数内部的变量</li> <li>外部函数返回值是对尾调用函数的调用； 形如 return innerFunc();</li> <li>尾调用函数返回后不需要执行额外的逻辑</li> <li>尾调用函数不是引用外部函数作用域中自由变量的闭包</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>”use strict“<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fibImpl</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fibImpl</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">finImpl</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token operator">+</span>b<span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>函数尾递归优化</p> <p>尾调用自身称为尾递归。尾递归只存在一个调用帧，不存在”栈溢出“的错误</p> <p>递归函数的改写：将内部的变量作为函数的参数进行传递</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//斐波那契数列</span>
<span class="token keyword">function</span> <span class="token function">Fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> ac1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ac2 <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> ac2<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">Fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> ac2<span class="token punctuation">,</span>  ac1 <span class="token operator">+</span> ac2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 阶乘函数</span>
<span class="token keyword">function</span> <span class="token function">tailFactorial</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> total</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> total<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">tailFactorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>内存泄漏：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//还引用着element对象</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 解决方法：</span>
<span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span>
element <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>eval 什么时候用</p></li> <li><p>js事件循环</p> <p>JS是单线程语言，而事件循环是JS的执行机制</p> <p>同步任务直接进行主线程中执行，而异步任务进入Event Table并注册回调函数，当主线程执行完毕，会去任务队列中读取对应的函数进入主线程执行</p> <p>异步任务又分为宏任务(主代码块、setTimeout、setInterval)和微任务（<code>promise.then</code>、<code>process.nextTick</code>）</p> <p>宏任务-&gt;微任务-&gt;渲染-&gt;宏任务-&gt;微任务-&gt;渲染</p> <p>主进程完成后会先去清空微任务队列中，再开启下一轮事件循环：从宏任务开始-&gt; 收集微任务 -&gt;一个宏任务执行完清空微任务队列 -&gt; 开启下一轮事件循环</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'background:blue'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'background:black'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1 3 2 且页面没有变成蓝色，因为promise微任务执行完才渲染，所以直接变黑</span>

<span class="token comment">//一次宏任务-&gt;渲染 以下代码在黑色1s后再变红色</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'background:blue'</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'background:red'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'background:green'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'background:black'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></li> <li><p>事件冒泡，好处是什么</p></li> <li><p>axios和fetch的区别</p></li> <li><p>ES6模块化和CommonJS模块化的区别</p> <p>ES6模块中自动采用严格模式</p> <p>export语句输出的接口是对应值的引用，动态绑定的关系，通过语句可以获取模块内部实时的值</p> <p>export可以默认暴露一个对象、一个函数，在eslint校验中，匿名函数、匿名对象都会报警告</p> <p>export分别暴露要给暴露的东西都声明一个变量名，import的时候才能取到</p> <p>对于唯一暴露的引入，可以在引入模块中随便命名</p> <p>import导入的变量都不能在导入模块中对其进行修改</p> <p>有默认导出也可以有其他导出</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//export</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> _b <span class="token operator">=</span> <span class="token string">'23'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'sss'</span>；
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 第二种</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> _b <span class="token operator">=</span> <span class="token string">'23'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'sss'</span>；
<span class="token keyword">export</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span> _b<span class="token punctuation">,</span> c<span class="token punctuation">}</span>
<span class="token comment">// 默认暴露一个匿名函数</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 相当于</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>a <span class="token keyword">as</span> <span class="token keyword">default</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// import</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span> _b<span class="token punctuation">,</span> c<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xxx'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> a <span class="token keyword">as</span> aa<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xxx'</span>
<span class="token comment">// 为匿名函数指定任意名字</span>
<span class="token keyword">import</span> defaultFn <span class="token keyword">from</span> <span class="token string">'xxx'</span>
<span class="token comment">// 相当于</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token keyword">as</span> defaulFn<span class="token punctuation">}</span> form <span class="token string">'xxx'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>为什么在浏览器端不用Commonjs模块化？因为Commonjs的require是同步的，在服务器中require加载的模块是在本地存取，而浏览器require加载一个模块一般在服务器上，同步的话速度会很慢</p> <ul><li>CommonJS模块输出的是一个值的拷贝，ES6 模块输出的是值的引用；</li> <li>CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。</li></ul></li> <li><p>CMD和AMD规范</p></li> <li><p>原型链继承和class的区别</p></li> <li><p>async await原理：</p> <p>await规定了异步操作只能同步执行，只能在async函数中使用</p> <p>async函数执行完返回一个<strong>fulfilled状态的Promise</strong></p> <p>async/await是一种语法糖，用的是ES6的generator生成器函数，生成一个迭代器，第一次调用next方法到达第一个yield的地方，里面yield返回一个promise对象，给除了第一次的next函数传参，会被作为上一次yield的返回值，被赋值号左边的变量接收。</p> <p>gen函数调用next时，yield生成一个promise对象，next返回的就是value为promise对象的对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//执行器函数：生成器函数中是一个异步的容器，需要有一个执行器函数执行该生成器函数返回的迭代器并且能自动调用自身</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 用num1 num2来接收next传参</span>
<span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 后面跟着函数，到达yield的地方会立刻执行该函数，函数返回值作为此次的value</span>
    <span class="token keyword">let</span> num2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">fn</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> num2<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">gen</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> next1 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第一次调用next 返回值是 { value: 一个promise, done: false}</span>
    next1<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res1</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>next1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第二次next里面传的值就是传给第一次yield的返回值</span>
        <span class="token keyword">const</span> next2 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value:一个promise, done: false}</span>
        next2<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res2</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> next3 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>next3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">function</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">generatorToAsync</span><span class="token punctuation">(</span><span class="token parameter">gen</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
        <span class="token comment">// 返回一个promise</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">function</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">let</span> res<span class="token punctuation">;</span>
                <span class="token keyword">try</span><span class="token punctuation">{</span>
                    res <span class="token operator">=</span> g<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>

                <span class="token punctuation">}</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">,</span> done<span class="token punctuation">}</span> <span class="token operator">=</span>res<span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token operator">=&gt;</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token string">'throw'</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token function">go</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> asyncFunc <span class="token operator">=</span> <span class="token function">generatorToAsync</span><span class="token punctuation">(</span>gen<span class="token punctuation">)</span>
<span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回一个Promise</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div></li> <li><p>[1,2,3].map(parseInt)，parseInt(string, raidx)接收第二个参数radix(2~36)之间的整数，10进制不是默认值</p> <p>当第一个非空格字符不能转换为数字或者radix小于2或者大于36的时候，返回NaN</p></li> <li><p>drag api</p></li> <li><p>正则表达式</p></li> <li><p>js精度丢失的问题 如何实现0.1 *0 .2;</p></li> <li><p>setTimeout和setInterval的区别，setInterval有缺点，如果代码执行时长比设置间隔的时间长时间</p> <p>setInterval：不是每过ms秒会执行一次fn，而是每过ms秒，会有fn进入Event Queue。一旦setInterval的回调函数fn执行时间超过了延迟时间ms，那么就完全看不出来有时间间隔了</p></li> <li><p>箭头函数不能用于创建生成器函数</p></li> <li><p>JS遍历对象的几种方法：</p> <ul><li>for...in 除Symbol可枚举、继承</li> <li>Object.keys 可枚举、非继承</li> <li>Object.getOwnPropertyNames 拿到这个对象上除Symbol作为名称的属性，包括不可枚举，非继承</li></ul></li> <li><p>undefined == null / NaN == NaN / NaN === NaN / Object.is(NaN, NaN) /</p></li> <li><p>继承：</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">'男'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 指向原型对象</span>
<span class="token function">consolelog</span><span class="token punctuation">(</span>per<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">//constructor是在原型对象上的</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// 实例可以顺着原型链找到该属性</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><p>上下文，执行上下文：全局上下文、函数上下文、eval函数执行上下文</p> <ul><li>执行上下文的生命周期：创建阶段、执行阶段、销毁阶段
<ul><li>进行变量和函数的初始化</li> <li>构建作用域链</li> <li>绑定this</li> <li>执行阶段，逐行执行代码，执行的时候为变量赋值</li></ul></li> <li>词法环境：由环境记录（存储变量和函数声明的实际位置）和对外环境的引用（它可以访问其外部词法环境）组成</li> <li>ES5的执行上下文：
<ul><li>创建全局上下文：创建词法环境和变量环境、确定this</li> <li>遇到函数，创建函数上下文，创建词法环境、变量环境、确定this</li></ul></li></ul></li> <li><p>Promise.resolve()，不一定返回一个已完成的promise对象</p> <p>Promise.reject()，返回一新的Promise对象，状态为rejected</p></li> <li><p>async中的await会将async函数后面的代码阻塞，后面的会被放进微任务里面，等到宏任务执行完再执行</p></li> <li><p>let：块级作用域；不初始化的时候赋予undefined；不允许同时let两个同名变量；变量不会提升；let声明的变量不会成为window的属性；</p> <p>var：函数作用域，不初始化的时候赋予undefined；允许重复var一个变量名；声明提升，赋值在后</p> <p>const：和let相似；声明时必须同时初始化变量</p></li> <li><p>数值转换：Number(undefined) = NaN Number(对象) 先调用valueof方法，如果转换结果为NaN，则调用toString方法</p></li> <li><p>Number('') = 0 Number(undefined) = NaN Number(null) = 0</p></li> <li><p>parseInt(null / undefined / NaN) = NaN ; parseInt(' ') = NaN，Number()找字符串中的数值，也会忽略前置0</p></li> <li><p>严格模式：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode</p> <p>1、让一些过失变成报错 2、提早设置了一些未来JS的标准 3、让eval和arguments变得简单</p> <p>函数参数名不能重复、对象属性名必须唯一、无法意外创建全局变量、引起静默失败（给不可读的属性值会报错）...</p> <p>严格模式下禁用with；函数名.callee 函数名.caller 都被禁用</p> <p>在普通模式下，在所有地方定义函数都是合法的，严格模式下禁止不在脚本或者函数层面上的函数声明</p> <p>严格模式下，不能为arguments、eval通过程序赋值；arguments的值只会等于传入的参数，不会随函数程序的进行而改变</p> <p>严格模式下，调用函数时如果没有指定上下文对象，this值不会指向window，除非使用apply、call把函数指定给一个对象</p></li> <li><p>toString()在转换数值的时候可以接受一点底数；null和undefined没有toString，但可以String</p></li> <li><p>String.raw 是一个标签函数，能直接获取原始模板字面量的内容如换行符或者Unicode字符</p></li> <li><p>标签函数 函数名后面跟一个模板字符串</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">simpleTag</span><span class="token punctuation">(</span><span class="token parameter">strings<span class="token punctuation">,</span> <span class="token operator">...</span>expression</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token keyword">let</span> taggerRes <span class="token operator">=</span> simpleTag<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>c<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token comment">// 相当于传参</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>Boolean布尔转换（if里面的条件也是调用了该函数）转换结果为false的有：0、NaN、&quot;&quot;、null、undefined、false</p></li> <li><p><code>&gt;&gt;</code> （有符号右移）：移出来的位用符号位补</p></li> <li><p><code>&gt;&gt;&gt;</code>（无符号右移） ：对于正数和有符号右移相同，会给空位补0，不管符号位是什么</p></li> <li><p>加法操作符中某一个操作数是字符串，会进行字符串拼接，转为字符串</p></li> <li><p>减法操作符中某一个操作数是字符串，会进行数值转换</p></li> <li><p>null和undefined无法转为其他类型的值进行相等（==）比较（null == 0/ undefined == 0都为false）</p></li> <li><p>执行上下文决定了变量和函数能访问到哪些数据，每个上下文都有一个关联的<strong>变量对象</strong>，全局上下文是最外层的上下文</p> <p>函数的变量对象最初只有arguments一个变量</p> <p>上下文执行的时候就会创建一个<strong>变量对象</strong>的作用域链；作用域链决定了各级上下文中的代码在访问变量和函数时的顺序</p></li> <li><p><strong>垃圾回收</strong>：当一个变量不再引用一个<strong>堆内存中的对象</strong>时，这个对象留在堆内存中，多了就会占用空间；JS会通过自动内存管理实现内存分配和闲置资源回收，确定哪个变量不会再使用，然后释放所占内存</p> <p>垃圾回收策略：</p> <ul><li><p>标记清理：从出发点遍历内存中所有的对象去打标记，垃圾回收程序会标记内存中存储的所有变量，会把所有在上下文中的变量和被在上下文中变量引用的变量的标记去掉，在此之后，还有标记的变量就是待删除的了。</p> <p>缺点：清除之后，剩余对象内存位置是不变的，也会导致<strong>空闲空间不连续</strong>，出现了<strong>内存碎片</strong>，进而出现了<strong>内存分配慢</strong>的问题，需要遍历找到大于所需要的size的内存分配。</p></li> <li><p>引用计数：对每个值都记录它被引用的次数，当一个值的引用数为0时，表示没办法再访问到这个值了，垃圾回收程序运行的时候会释放引用数为0的值的内存 ，在引用值为0的时候就能立刻执行垃圾回收，而<strong>标记清理需要每隔一段时间去遍历堆里活动以及非活动对象来清除，需要暂停线程</strong></p> <p>缺点：循环引用会使引用值永远不为0；需要一个计数器</p></li></ul></li> <li><p>内存管理：</p> <ul><li>let和const的声明会提升性能，改进垃圾回收程序的介入</li> <li>内存泄漏：内部闭包，返回一个函数一直引用着函数作用域里的变量</li></ul></li> <li><p>为什么原始值身上能调用方法：会先创建一个原始值包装类型的对象-&gt;调用该实例上的方法 -&gt; 销毁这个实例</p></li> <li><p>迭代器模式理解（实现了<code>Iterable</code><strong>接口</strong>且被<code>Iterator</code><strong>消费</strong>）：</p> <ul><li>可迭代对象：数组或集合这样的集合类型</li> <li>迭代器：按需创建的一次性对象，每个迭代器都会关联一个可迭代对象，迭代器会暴露迭代其关联对象的API</li> <li>默认迭代器属性：Symbol.iterator，其引用一个工厂函数，调用工厂函数会返回一个新迭代器</li> <li>实现<code>Iterable</code>接口（可以理解为数据结构有迭代器工厂函数）可以具备创建实现<code>Iterator</code>接口的对象的能力</li> <li>内置数据类型实现了Iterable接口：字符串、数组、映射、集合、arguments、NodeList等DOM集合类型，有迭代器属性</li> <li>接受可迭代对象的原生语言特性有：for...of、数组解构、扩展运算符、Array.from、创建集合、创建映射、promise.all、promise.race、yield*操作符</li> <li>提前终止迭代过程，会调用迭代器暴露出来的return方法，但不一定关闭该迭代器</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> iter <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//拿到迭代器</span>
iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用迭代器暴露的Next方法，返回一个对象 {done: false, value: 'foo'}</span>
iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用迭代器暴露的Next方法，返回一个对象 {done: false, value: 'bar'}</span>
iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用迭代器暴露的Next方法，返回一个对象 {done: true, value: undefined}</span>
<span class="token comment">// 如果在迭代的中间，对arr进行插入值，迭代结果也会产生相应的变化</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 实现迭代器接口</span>
<span class="token keyword">class</span> <span class="token class-name">Counter</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">limit</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>limit <span class="token operator">=</span> limit
    <span class="token punctuation">}</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> limit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>limit<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> limit<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token operator">:</span> count<span class="token operator">++</span><span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 迭代器的关闭问题</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>let arr = [1,2,3,4,5]
let iter = arr[Symbol.iterator](); //返回数组的迭代器
for(let i of iter){
  if(i &gt; 2){
    break;
  }
  console.log(i)
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>// 执行到这数组的迭代器没有关闭迭代 所以下次循环同一个迭代器会继续迭代</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> iter<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>生成器理解（拥有在函数块内暂停和恢复代码执行的能力）</p></li> <li><p>生成器的形式是一个函数，function * fn(){} 加上*表示他是一个生成器</p></li> <li><p>调用生成器函数会产生一个生成器对象，该对象一开始处于<strong>暂停执行</strong>状态，实现了<code>Iterator</code>接口，具有next方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'foo'</span>
<span class="token punctuation">}</span>
<span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//生成器对象实现Iterator接口 迭代器工厂函数</span>
<span class="token keyword">let</span> generatorObj <span class="token operator">=</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用生成器函数生成一个迭代器 暴露出方法</span>
generatorObj<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> x1 <span class="token operator">=</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用工厂函数生成一个迭代器</span>
x1 <span class="token operator">===</span> generatorObj <span class="token comment">// true</span>


<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span>
  <span class="token keyword">yield</span> <span class="token number">2</span>
  <span class="token keyword">yield</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 2, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 3, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li> <li><p>yield关键字可以让生成器停止和开始执行，遇到yield之前函数正常执行；遇到yield暂停执行；next返回结果对象中的value是yield的返回，要用next恢复执行。通过return退出生成器函数</p> <p>yield关键字只能在生成器函数中使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">generationFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">yield</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> generatorObj <span class="token operator">=</span> <span class="token function">generationFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//生成迭代器</span>
generatorObj<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第一次调用next 到第一个yield处暂停执行 返回{ done: fasle, value: undefined}</span>
generatorObj<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第二次调用next 没有yield了 函数执行完</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>生成器函数调用<strong>返回一个迭代器</strong>，所以可以for...of解构循环生成的迭代器，用yield控制输出</p></li> <li><p>next中还可以传递参数，<strong>第一次调用next传入的值不会被使用，第二次调用next()传入的参数作为上一句yield语句的返回值</strong></p></li> <li><p>yield * 增强写法，<strong>可以将跟在其后的可迭代对象序列化一连串值</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token operator">*</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// yield增强写法后面跟一个可迭代对象 可以一次性遍历它</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> x <span class="token keyword">of</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 等价于把yield放入一个循环中</span>
<span class="token keyword">function</span> <span class="token operator">*</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> x <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token keyword">yield</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>生成器函数生成的迭代器，return和throw方法用于强制将生成器进入关闭状态</p></li> <li><p>对象属性有两种类型，每种类型有四个特性：数据属性（configurable、enumerable，writable、value）和访问器属性（configurable、enumerable、Get函数、Set函数）</p></li> <li><p>Object.assign 不能在两个对象间转移获取函数和设置函数，如果有访问器属性，对于相同属性名会调用源对象上的获取函数，会调用目标对象上的设置函数，实际上不会把源对象上的获取函数转移到目标对象上。</p> <p>Object.assign会使用最后一个源对象的相同属性，即会覆盖</p></li> <li><p>ES6新增可计算属性，即属性名可以用函数计算出来或者用变量得到</p></li> <li><p>ES6扩展运算符的深拷贝还是浅拷贝的问题</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 数组</span>
<span class="token keyword">const</span> years <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2021</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> copyYears <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>years<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//深拷贝第一层</span>
<span class="token keyword">const</span> copyArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//深拷贝第一层，所以copyArr[0]的改变会影响原arr</span>

<span class="token comment">// 对象</span>
<span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token punctuation">{</span>
    year<span class="token operator">:</span> <span class="token number">2021</span><span class="token punctuation">,</span>
    month<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    day<span class="token operator">:</span><span class="token punctuation">{</span>
        value <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> copyTime <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>time<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//对copyTime[day]进行修改也会影响原对象time</span>

<span class="token comment">// 展开set进行数组去重</span>
<span class="token comment">// 展开一个字符串成为一个数组</span>
<span class="token comment">// nodelist</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li> <li><p>对象解构：<strong>不能对null和undefined进行解构，原始类型会被转换为对象</strong></p></li> <li><p>嵌套解构（外层属性没有的时候不能解构）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Matt&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
    job<span class="token operator">:</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;writer&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> personCopy <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> personCopy<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    age<span class="token operator">:</span> personCopy<span class="token punctuation">.</span>age<span class="token punctuation">,</span>
    job<span class="token operator">:</span> personCopy<span class="token punctuation">.</span>job
<span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">)</span>
<span class="token comment">// 嵌套</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> job <span class="token operator">:</span> <span class="token punctuation">{</span> title <span class="token operator">:</span> title<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//writer</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>部分解构（开始赋值成功后面出错，那么就解构一部分）</p></li> <li><p>函数参数解构：对传入的对象进行解构，相当于加了函数作用域里的变量；解构不会影响函数内部arguments变量</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">printPerson</span><span class="token punctuation">(</span><span class="token parameter">foo<span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> age<span class="token punctuation">}</span><span class="token punctuation">,</span> bar</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>class声明一个类，<strong>不会类声明提升</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
 <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 这是一个类构造函数，必须使用new调用它 </span>
<span class="token comment">// 会变成一个普通的类方法 </span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">locate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'instance'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token function">locate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'定义在类原型上的公共方法'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Person.prototype.locate() 后边实例可以顺着原型链找到</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name_ <span class="token operator">=</span> newName
 <span class="token punctuation">}</span>
 <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name_
 <span class="token punctuation">}</span>
 <span class="token keyword">static</span> <span class="token function">locate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'类的静态方法'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">//this指向Person</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">typeof</span> Person<span class="token punctuation">;</span> <span class="token comment">//是函数 function</span>
 <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person<span class="token punctuation">;</span> <span class="token comment">//类的原型上的constructor属性指向自身</span>
 <span class="token comment">// 实例的constructor和类的constructor是不一样的</span>
 <span class="token comment">// 一个是顺着原型链查找 指向Person自身</span>
 <span class="token comment">// 一个是一个构造函数，可以看成普通函数</span>
 <span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// new一个类</span>
 p1<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person<span class="token punctuation">;</span> <span class="token comment">// true 即指向类自身</span>
 p1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
 p1 <span class="token keyword">instanceof</span> <span class="token class-name">Person<span class="token punctuation">.</span>consturctor</span><span class="token punctuation">;</span> <span class="token comment">// 不是类中定义的构造函数 </span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 直接new类里面的构造函数</span>
 p2<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person<span class="token punctuation">;</span> <span class="token comment">//false</span>
 p2 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
 p2 <span class="token keyword">instanceof</span> <span class="token class-name">Person<span class="token punctuation">.</span>constrcutor</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>在类构造函数中调用super会调用父类的构造函数，<strong>用super之前不能引用this</strong>，不使用super也不能引用；super也可以拿来引用父类的静态方法</p> <p>在派生类中显式定义了构造函数，要么调用super，要么返回一个对象；如果派生类中没有定义构造函数，则实例化派生类时会调用super（）并且传入所有传给派生类的参数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义抽象基类</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>ES6代理和反射</p></li> <li><p>立即调用函数可以创建一个块级作用域，内部定义的外部访问不到，函数执行完毕，作用域链就会被销毁</p></li> <li><p>DOM的Nodelist对象、namedNodeMap、HTMLCollection都是实时的，文档结构的变化都会在他们身上体现出来</p></li> <li><p>MutationObserver接口，可以在dom被修改的时候执行异步回调</p> <p><code>new MutationObserver()</code>传入一个构造函数；构造函数可传入两个参数，一个是包含发生了什么变化的数组，一个是观察变化的MutationObserver 实例</p> <ul><li>observe方法，表示要观察哪个DOM对象，以及观察的形式是什么，可选值有属性、子节点、子树等</li> <li>disconnect方法，提前终止回调，也会抛弃已经加入任务队列要执行的回调</li></ul> <p>一个实例可以观察多个DOM对象，调用disconnect方法后，会停止该实例的所有观察行为</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 基本用法</span>
<span class="token keyword">let</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">mutationRecords</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'wuhu!'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mutationRecords<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 改变时返回一个数组(每一个成员都是一个MutationRecord类实例对象)</span>
      <span class="token comment">/*Array(1)
            0: MutationRecord
            addedNodes: NodeList []
            attributeName: &quot;class&quot;
            attributeNamespace: null
            nextSibling: null
            oldValue: null
            previousSibling: null
            removedNodes: NodeList []
            target: body.foo
            type: &quot;attributes&quot;
            [[Prototype]]: MutationRecord
            length: 1
            [[Prototype]]: Array(0)
      */</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token punctuation">{</span> attributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'change!!!'</span><span class="token punctuation">)</span>
<span class="token comment">/*
    observer.observe(document.body, { attributeOldValue: true});

    document.body.className = 'foo';
    document.body.className = 'bar';

    document.body.className = 'baz';

    这个时候mutationRecords数组里的成员会记录该属性的旧值
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>每次变化的信息保存在MutationRecord类实例对象中，然后添加到记录队列，被调用的回调会接收到数组，数组里面是MutationRecord实例对象，顺序为他们进入记录队列的顺序。回调函数执行后，记录队列清空，内容被丢弃。</p></li> <li><p>DOM样式：</p> <p>1、HTML的style属性，只能获取到内联样式，不包含层叠机制和外部样式种继承来的，js style对象</p> <p>2、document.defaultView.getComputedStyle(); 传入两个参数，要取得计算样式的元素和伪元素字符传入“:after”，如果不查伪元素则传null</p> <p>3、操作样式表，包括使用link元素和style元素定义的样式表。document.styleSheets；拿到样式表后就能用cssRules或者rules属性操作里面的css规则，rule.style属性获得</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> sheet <span class="token operator">=</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//取得第一个样式表</span>
<span class="token keyword">let</span> rules <span class="token operator">=</span> sheet<span class="token punctuation">.</span>cssRules <span class="token operator">||</span> sheet<span class="token punctuation">.</span>rules<span class="token punctuation">;</span>
<span class="token keyword">let</span> rule <span class="token operator">=</span> rules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//取得第一条规则</span>
<span class="token comment">// 一个选择符下的就是一条规则 比如 .box{} </span>
rule<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token punctuation">;</span> <span class="token comment">//取得完整css代码</span>
rule<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width<span class="token punctuation">;</span> <span class="token comment">// 影响到相同规则的所有元素 比如类名都为box的元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>元素尺寸</p> <ul><li>偏移尺寸
<ul><li>offsetHeight：垂直方向占用的像素尺寸，包括内边距+内容+边框+水平滚动条的高度（如果有）</li> <li>offsetTop：上边框外侧距离包含元素上边框内测的像素数</li></ul></li> <li>客户端尺寸
<ul><li>clientHeight：元素内容和内边距的高度</li></ul></li> <li>滚动尺寸
<ul><li>scrollTop：内容去顶部隐藏的像素数，设置这个属性可以改变元素的滚动位置，不包含边框在里面</li> <li>scrollHeight：没有滚动条出现时，元素内容的总高度。document.documentElement.scrollHeight整个页面垂直方向的高度</li></ul></li> <li>确定元素尺寸：每个元素上都有getBoundClientRect（）返回一个DOMRect对象，包含left、top、right、bottom、height、width属性。bottom是元素底部到视口顶部的距离。right是元素右边到视口左边的距离</li></ul></li> <li><p>DOM0事件处理程序：获取元素，元素的on+事件名赋予一个函数 给事件属性赋为null</p> <p>DOM2事件处理程序：addEventListener('click', func., false/true)；可以给一个事件添加多个处理函数，并且顺序执行</p> <p>IE事件处理程序：attachEvent(on+'click', func,)，只支持添加到冒泡阶段；函数中的this是window；可以给一个事件添加多个处理函数，并且反序执行</p></li> <li><p>DOM事件对象event：addEventListener也可将event传入；event.type; event.preventDefault()，阻止默认行为;event.stopPropagation()阻止冒泡； target（真正点击的元素）;currentTarget;</p> <p>IE事件对象存储在window对象中：attachEvent也会可将event传入;event.srcELement(相当于currentTarget，即注册时事件处理程序的元素);event.type;event.cancelBubble=false（设置为true可以取消冒泡）;event.returnValue=false（阻止默认行为）</p></li> <li><p>DOM表单</p></li> <li><p>XHR</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'method'</span><span class="token punctuation">,</span><span class="token string">'url'</span><span class="token punctuation">,</span>isAsync<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span> or data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// xhr.open第三个参数传true表示异步时可以监听readystatechange时间</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">304</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hehe'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><p>xhr.setRequestHeader(&quot;&quot;, &quot;&quot;) 加入请求头的名、请求头的值</p></li> <li><p>Formdata类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'laogan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>xhr.timeout=1000; 定义超时。<strong>超时的话readyState也会变成4，但是访问xhr.status会出错</strong></p></li></ul></li> <li><p>进度事件，每次发送请求触发事件的流程如下；progress会触发多次，并且能拿到event对象，event对象中有一些进度信息可用</p></li></ul> <p>loadstart -&gt; progress  -&gt; error/load/abort -&gt; loadend</p> <ul><li><p>Fetch API，xhr可以选择异步，fetch则一定要异步</p> <p>只传入第一个参数，默认是get请求，第二个init对象，可以配置一些选项</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>status<span class="token punctuation">)</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span>    
        <span class="token comment">// 纯文本格式的内容</span>
        res<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> err<span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 用fetch发送JSON数据</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> payload<span class="token punctuation">,</span>
    headers<span class="token operator">:</span> jsonHeaders
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 发送请求参数</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> payload<span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Headers</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token operator">:</span><span class="token string">'/x-www-form-urlencoded'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 发送文件</span>
<span class="token keyword">let</span> imageFormData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
imageFormData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> imageFormData
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>Headers对象是所有外发请求和入站响应头部的容器，和Map类型的对象相似，都有set、get、has等方法，并且初始化可以直接new Header（）传入一个对象，并有一个append方法可以追加一个属性的属性值</p> <p>Request对象是获取资源请求的接口，接受第二个参数init对象，也是配置一些选项</p> <p>request实例对象传入fetch发送请求，传给fetch的init对象可覆盖request实例时的init对象。</p> <p>bodyUesed属性为true的话，就不能再被下面的response对象同理</p> <p>response对象，获取资源响应的接口</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>
<span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span>

r<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 请求对象已经被使用过 会报错</span>

<span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//请求对象只能在一次fetch中使用</span>
<span class="token comment">// 要多次使用 借助clone</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>fetch请求过后会的请求体，支持5个方法，用于将缓冲区中的数据转换为某种js对象类型用于通过期约产生结果。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Body.text()</span>
<span class="token comment">// Body.json()</span>
<span class="token comment">// Body.formData()</span>
<span class="token comment">// Body.arrayBuffer()</span>
<span class="token comment">// Body.blob()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>ES6类实现的过程：
1、将方法定义在类的prototype属性上
2、将静态方法定义构造函数身上
3、子类的构造函数生成需要传入父类
4、子类构造函数的prototype是以父类prototype为原型的对象，继承原型的东西
5、子类构造函数本身的__proto__也要变为父类，继承构造函数和静态方法
6、new子类的时候，拿到父类的构造函数执行，call改变this指向</p></li> <li><p>try...catch：是同步代码，try块里面的异步错误是捕获不到的，捕获不到Promise的错误，内部已经封装好了，不会往上抛</p></li> <li><p>虚拟长列表如何实现</p> <p>数据量大且无法使用分页方式来加载的列表，虚拟列表就是可视区域渲染，只渲染可见的部分</p> <p>思路：item项固定高度的话（记为itemsize），itemCount（可见区域 / item的高度）获得可见区域内可展示的列表项数目，可视区域起始数据的索引（startIndex = scrollTop / itemSize）、可视区域结束数据的索引（startIndex + itemcount），滚动高度scrollTop，然后根据索引对展示数据进行切片展示；</p> <p>步骤：计算startIndex、计算endIndex、计算数据展示、计算startIndex的数据在整个列表中的偏移位置</p> <p>html结构如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 撑起内容区 高度为返回过来的数据的总高度 形成滚动条 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- item。。。 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>对于item的高度，一般是不固定的，解决方案：预估高度进行渲染，然后获取真实高度并缓存</p> <p>初始化时为每一项都添加预估的高度，初始化postions数组，为每一项指定预估的高度，然后在滚动的时候，获取真实的高度并保存，重新渲染。</p> <p>滑动的时候出现短暂白屏，可以增加缓存区above和below，渲染上方和下方的一些列表出来</p></li> <li><p>async函数和await函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token number">1</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 等价于</span>
<span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>JS函数传参可以理解为值的复制，对于引用类型，复制其地址，改变对象里面的属性，会造成函数内函数外一同改变，若对整个对象进行替换，则函数外传入的实参不受影响。</p></li> <li><p>函数的name属性，匿名函数的name属性为空字符串，以函数名字为准，而不是以对象名或者属性名为准，如果没有定义函数名，那么就会走推导</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function-variable function">getGender</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getGenderMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
person<span class="token punctuation">.</span><span class="token function-variable function">getAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
sum<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 空</span>
person<span class="token punctuation">.</span>getGender<span class="token punctuation">.</span>name <span class="token comment">// getGenderMethod</span>
person<span class="token punctuation">.</span>getName<span class="token punctuation">.</span>name <span class="token comment">// getName</span>
person<span class="token punctuation">.</span>getAge<span class="token punctuation">.</span>name <span class="token comment">// 空</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>被bind之后的函数名，前面会加上一个”bound“</p> <p>getter和setter也是函数，name属性会是get [函数名] set [函数名]</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontEnd/js/DOM.html" class="prev">
        常用DOM操作
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.585d659a.js" defer></script><script src="/assets/js/2.5bf1c715.js" defer></script><script src="/assets/js/36.e670371f.js" defer></script>
  </body>
</html>
